<html>
    <head>
        <title>Quiz Cards</title>
        <script src="https://cdn.tailwindcss.com"></script>
    </head>
    <body class="bg-gray-900 text-white">
        <h1 class="m-10 text-6xl">Your sets:</h1>
        <div id="cards" class="w-[100vw] grid grid-cols-2 grid-rows-auto justify-center">
            <!-- Placeholder for user sets -->
        </div>
    </body>
</html>
<script>
loadcards();
    function opencards(setname) {
        window.location.href = `/viewcard?setname=${setname}`;
    }
    function deleteset(name){
        fetch(`/api/delete?name=${name}`)
        .then( respons => {
            if (!respons.ok){
                alert('UKNOWN ERROR')
            }
            else{
                window.location.href = '/dash'
            }
        })
    }
    async function loadcards(){
        await fetch('/api/cards?clear=True')
        .then(response => response.json())
        .then(data => {
            console.log(data);
            data.forEach(set => {
                createcard(set.Title, set.cards, set.description);
            });
        });
    }
    function createcard(Title, cards, desc) {
        const div = document.createElement("div");
        div.className = "relative bg-white/10 rounded-lg border border-white/30 m-10 p-6 hover:cursor-pointer left-[2vw] h-[40vh] w-[40vw] grid grid-rows-[1fr_auto]"
        div.innerHTML = `
        <div class="row-start-1 row-end-1" onclick="opencards('${Title}')">
            <h2 class="text-5xl mb-4">${Title}</h2>
            <p class="text-white/70 text-3xl">${cards} Cards</p>
            <br>
            <p class="text-white/70 text-3xl">${desc}</p>
        </div>
        <div class="row-start-2 grid grid-rows-2 gap-2">
            <button class="bg-red-400/10 p-6 h-fit rounded-md bottom-[0px] w-full text-2xl" onclick="deleteset('${Title}')">Delete</button><button class="bg-orange-400/10 p-6 h-fit rounded-md bottom-[0px] text-2xl" onclick="editcard('${Title}')">Edit</button>
        </div>
        `
        document.getElementById("cards").appendChild(div);
    }
    function editcard(title){
        window.location.href = `/create?edit=${title}`
    }
</script>